<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:fn="http://www.w3.org/2005/xpath-functions">
  <head>
    <title>jMock - Mocking Generic Types</title>
    <link media="screen" rel="stylesheet" type="text/css" href="./jmock.css"/>
    <link media="print" rel="stylesheet" type="text/css" href="./print.css"/>
    <link rel="icon" type="image/png" href="./icon.png"/>
    <meta http-equiv="Content-Script-Type" content="text/javascript"/>
    <script type="text/javascript" src="prefs.js">
      
    </script>
  </head>
  <body onload="restorePreferredTestFramework()">
    <div id="banner">
      <a href="./index.html">
        <img id="logo" src="logo.png" alt="jMock"/>
      </a>
    </div>
    <div id="center" class="Content">
      <div id="content">
        <h1>Mocking Generic Types</h1>
        <p>Java's generic type system does not work well with its dynamic
    reflection APIs. For jMock, this means that the compiler will warn you
    about possible static type errors when you mock generic types. The
    warnings are incorrect. The best way to avoid them is to suppress the
    warning with an annotation on the variable declaration of the mock
    object.</p>
        <p>Consider, for example, the following generic interface:</p>
        <pre class="Java Source">public interface Juicer&lt;T extends Fruit&gt; {
    Liquid juice(T fruit);
}</pre>
        <p>In a test, you would want to mock this interface as follows:</p>
        <pre class="Java Source">Juicer&lt;Orange&gt; orangeJuicer = context.mock(Juicer&lt;Orange&gt;.class, "orangeJuicer");
Juicer&lt;Coconut&gt; coconutJuicer = context.mock(Juicer&lt;Coconut&gt;.class, "coconutJuicer");</pre>
        <p>However, that is not syntactically correct Java. You actually have to
    write the following:</p>
        <pre class="Java Source">Juicer&lt;Orange&gt; orangeJuicer = (Juicer&lt;Orange&gt;)context.mock(Juicer.class, "orangeJuicer");
Juicer&lt;Coconut&gt; coconutJuicer = (Juicer&lt;Coconut&gt;)context.mock(Juicer.class, "coconutJuicer");</pre>
        <p>Both those lines, though syntactically and semantically correct,
    generate type safety warnings. To avoid these warnings, you have to
    annotate the variable declarations with
    <code>@SuppressWarnings</code>:</p>
        <pre class="Java Source">@SuppressWarnings("unchecked")
Juicer&lt;Orange&gt; orangeJuicer = context.mock(Juicer.class, "orangeJuicer");

@SuppressWarnings("unchecked")
Juicer&lt;Coconut&gt; coconutJuicer = context.mock(Juicer.class, "coconutJuicer");</pre>
        <p>Hopefully future versions Java will improve the type system so that
    this is not necessary.</p>
      </div>
    </div>
    <div id="navigation">
      <div class="MenuGroup">
        <h1>
          <a href="download.html">Software</a>
        </h1>
        <versions xmlns="">
  <h2 xmlns="http://www.w3.org/1999/xhtml">jMock 2 (Java 1.5+)</h2><ul xmlns="http://www.w3.org/1999/xhtml"><li><a href="./download.html">Stable: 2.6.0</a></li></ul>
  <h2 xmlns="http://www.w3.org/1999/xhtml">jMock 1 (Java 1.3+)</h2><ul xmlns="http://www.w3.org/1999/xhtml"><li><a href="./download.html">Stable: 1.2.0</a></li></ul>
</versions>
        <p>
          <a href="./repository.html">Source Repository</a>
        </p>
        <p>
          <a href="./license.html">Project License</a>
        </p>
        <p>
          <a href="./versioning.html">Version Numbering</a>
        </p>
        <p>
          <a href="./extensions.html">Extensions</a>
        </p>
      </div>
      <div class="MenuGroup">
        <h1>Documentation</h1>
        <p>
          <a href="./getting-started.html">Getting Started</a>
        </p>
        <p>
          <a href="./cookbook.html">Cookbook</a>
        </p>
        <p>
          <a href="./cheat-sheet.html">Cheat Sheet</a>
        </p>
        <p>
          <a href="./javadoc.html">API Documentation</a>
        </p>
        <p>
          <a href="./articles.html">Articles and Papers</a>
        </p>
        <p>
          <a href="./jmock1.html">jMock 1 Documentation</a>
        </p>
        <p>
          <a href="http://www.mockobjects.com">About Mock Objects</a>
        </p>
      </div>
      <div class="MenuGroup">
        <h1>User Support</h1>
        <p>
          <a href="./mailing-lists.html">Mailing Lists</a>
        </p>
        <p>
          <a href="http://www.musketeer-labs.com/">Training</a>
        </p>
        <p>
          <a href="https://github.com/jmock-developers/jmock-library/issues">Issue Tracker</a>
        </p>
        <p>
          <a href="./news-rss2.xml">News Feed (RSS 2.0)</a>
        </p>
      </div>
      <div class="MenuGroup">
        <h1>Credits</h1>
        <p>
          <a href="./team.html">Development Team</a>
        </p>
        <p>
          <a href="http://www.github.com">Project hosted by Github</a>
        </p>
        <p>
          <a href="http://tango.freedesktop.org">Icons by the Tango Project</a>
        </p>
      </div>
    </div>
  </body>
</html>
