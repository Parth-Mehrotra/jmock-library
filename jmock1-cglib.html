<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:fn="http://www.w3.org/2005/xpath-functions">
  <head>
    <title>jMock - Mocking Classes with CGLIB</title>
    <link media="screen" rel="stylesheet" type="text/css" href="./jmock.css"/>
    <link media="print" rel="stylesheet" type="text/css" href="./print.css"/>
    <link rel="icon" type="image/png" href="./icon.png"/>
    <meta http-equiv="Content-Script-Type" content="text/javascript"/>
    <script type="text/javascript" src="prefs.js">
      
    </script>
  </head>
  <body onload="restorePreferredTestFramework()">
    <div id="banner">
      <a href="./index.html">
        <img id="logo" src="logo.png" alt="jMock"/>
      </a>
    </div>
    <div id="center" class="Content">
      <div id="content">
        <h1>jMock 1: Mocking Classes with CGLIB</h1>
        <p>Because it uses Java's standard reflection capability, the default
    configuration of the jMock framework can only mock interfaces, not
    classes. The optional <code>org.jmock.cglib</code> extension package uses
    the <a href="http://cglib.sourceforge.net">CGLIB 2</a><sup class="LinkFootnoteRef">1</sup> library to create
    mock objects of classes as well as interfaces.</p>
        <p>To use the CGLIB extension:</p>
        <ol>
      <li>Download <a href="http://sourceforge.net/project/showfiles.php?group_id=56933&amp;package_id=98218">CGLIB
      2</a><sup class="LinkFootnoteRef">2</sup> and the <a href="http://www.jmock.org/download.html">jMock CGLIB
      extension JAR</a><sup class="LinkFootnoteRef">3</sup> or a <a href="http://www.jmock.org/download.html">full
      jMock source snapshot</a><sup class="LinkFootnoteRef">4</sup>.</li>

      <li>Add CGLIB and the
      <code>jmock-cglib-</code><var>version</var><code>.jar</code> file to the
      CLASSPATH. If you have downloaded a source snapshot, compile the source
      and add the output directory to your classpath.</li>

      <li>Make your test cases extend
      <code>org.jmock.cglib.MockObjectTestCase</code>: <div class="Source Java"> <pre>import org.jmock.Mock;
import org.jmock.cglib.MockObjectTestCase;

class MyTest extends MockObjectTestCase {
    ...
}</pre> </div></li>

      <li>Your tests can now create mocks of abstract or concrete classes:
      <div class="Source Java"> <pre>Mock mockGraphics = mock(java.awt.Graphics.class,"mockGraphics");</pre>
      </div> <p>You can pass arguments to the constructor by passing the
      argument types and values to the <code>mock</code> method:</p> <div class="Source Java"> <pre>Mock mockedClass = mock(SomeClass.class,"mockList",
                        new Class[]{String.class, int.class},
                        new Object[]{"Hello", new Integer(1)});</pre>
      </div></li>
    </ol>
        <p>The <code>MockObjectTestsCase</code> class defined in the
    org.jmock.cglib package is completely compatible with that of the vanilla
    jMock API. The only difference is that it uses CGLIB to create proxies
    instead of the Java reflection API. This makes it easy to convert a test
    class to use the CGLIB extension when you find that there is no way you
    can possibly avoid mocking a concrete class: just change the base class of
    the test class to <code>org.jmock.cglib.MockObjectTestsCase</code> and all
    the mock objects will then use CGLIB to proxy calls.</p>
      </div>
      <div class="LinkFootnotes">
        <p class="LinkFootnotesHeader">Links:</p>
        <p>1.
	  				CGLIB 2:
	  				
	  				http://cglib.sourceforge.net</p>
        <p>2.
	  				CGLIB
      2:
	  				
	  				http://sourceforge.net/project/showfiles.php?group_id=56933&amp;package_id=98218</p>
        <p>3.
	  				jMock CGLIB
      extension JAR:
	  				
	  				http://www.jmock.org/download.html</p>
        <p>4.
	  				full
      jMock source snapshot:
	  				
	  				http://www.jmock.org/download.html</p>
      </div>
    </div>
    <div id="navigation">
      <div class="MenuGroup">
        <h1>
          <a href="download.html">Software</a>
        </h1>
        <versions xmlns="">
  <h2 xmlns="http://www.w3.org/1999/xhtml">jMock 2 (Java 1.6)</h2><ul xmlns="http://www.w3.org/1999/xhtml"><li><a href="./download.html">Stable: 2.6.0</a></li></ul>
  <h2 xmlns="http://www.w3.org/1999/xhtml">jMock 1 (Java 1.3+)</h2><ul xmlns="http://www.w3.org/1999/xhtml"><li><a href="./download.html">Stable: 1.2.0</a></li></ul>
</versions>
        <p>
          <a href="./repository.html">Source Repository</a>
        </p>
        <p>
          <a href="./license.html">Project License</a>
        </p>
        <p>
          <a href="./versioning.html">Version Numbering</a>
        </p>
        <p>
          <a href="./extensions.html">Extensions</a>
        </p>
      </div>
      <div class="MenuGroup">
        <h1>Documentation</h1>
        <p>
          <a href="./getting-started.html">Getting Started</a>
        </p>
        <p>
          <a href="./cookbook.html">Cookbook</a>
        </p>
        <p>
          <a href="./cheat-sheet.html">Cheat Sheet</a>
        </p>
        <p>
          <a href="./javadoc.html">API Documentation</a>
        </p>
        <p>
          <a href="./articles.html">Articles and Papers</a>
        </p>
        <p>
          <a href="./jmock1.html">jMock 1 Documentation</a>
        </p>
        <p>
          <a href="http://www.mockobjects.com">About Mock Objects</a>
        </p>
      </div>
      <div class="MenuGroup">
        <h1>User Support</h1>
        <p>
          <a href="./mailing-lists.html">Mailing Lists</a>
        </p>
        <p>
          <a href="http://www.musketeer-labs.com/">Training</a>
        </p>
        <p>
          <a href="https://github.com/jmock-developers/jmock-library/issues">Issue Tracker</a>
        </p>
        <p>
          <a href="./news-rss2.xml">News Feed (RSS 2.0)</a>
        </p>
      </div>
      <div class="MenuGroup">
        <h1>Credits</h1>
        <p>
          <a href="./team.html">Development Team</a>
        </p>
        <p>
          <a href="http://www.github.com">Project hosted by Github</a>
        </p>
        <p>
          <a href="http://tango.freedesktop.org">Icons by the Tango Project</a>
        </p>
      </div>
    </div>
  </body>
</html>
